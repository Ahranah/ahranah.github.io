---
layout: post
title: "비동기 처리"
date: 2025-03-18 09:48:08 +0900
categories: KB_ITs_Your_Life_6th
tags: [js, async, promise, 콜백함수, 비동기, await, ml, web]
---

비동기 처리란 시간이 오래 걸리는 함수와 빨리 끝나는 함수가 섞여있을 때 함수를 원하는 처리 순서에 맞게 프로그래밍하는 것을 말한다.

- 동기 프로그래밍 : 커피 주문을 받고, 커피가 완성될 때까지 다른 사람 주문을 안 받는 방식
- 비동기 프로그래밍 : 주문을 몰아서 받고 커피도 몰아서 처리하도록(동시에 진행) 하는 방식. 완료되지 않아도 다른 작업을 실행할 수 있다.

 

### Call back :

함수를 다른 함수에 인자로 넘겨주는 함수
- 아메리카노 주문이 3초 걸린다고 할 때, 완료 메세지를 setTimeout으로 3초 후에 나타나도록 한다. 

```javascript
const order = (coffee, callback) => {
	console.log(`${coffee} 주문 완료`);
    setTimeout(()=> {
    	callback(coffee);
       }, 3000);
   }
  
const display = (result) => {       
    	console.log(`{result} 완료`);
       }
 
 order('아메리카노', display);
```

 

### Promise :

성공이나 실패에 따라 반환할 값만 있을 뿐 성공/실패에 따라 실행할 명령을 가지진 않는다. 판단만 하고 뭘 해주진 않는다.

```javascript
const fs = require("fs").promises; // 모듈 불러오기

let lovekimchi = true;
const kimchi = new Promise((resolve, reject) => {
	if (lovekimchi)
    	resolve('신라면 끓여');
    else
    	reject('do you know kimchi?');
 });
 
 lovekimchi
 	.then(result => console.log(result))
    .catch(err => console.log(err))
    .finally(console.log('hello'));
```

 

### async / await :

promise 가 callback hell을 막고자 만들어졌지만, 프로미스 체이닝도 결국 복잡해지긴 하기에 생긴 개념이다. 

await 예약어는 async 함수에서만 사용할 수 있다. ‼️ await을 붙일 수 있는 함수는 promise를 반환하는 메서드여야 한다. 그리고 문제가 발생했을 때 실행을 멈추지 않고 다음 동작으로 이어가도록 try, catch문으로 예외처리를 해준다. 

```javascript
const fs = require("fs").promises;

async function init() {
try {
        const response = await fetch("https://~");
        const users = await response.json();
        console.log(users);
    } catch(error) {
    	// 예외처리 코드
        // error 객체는 오류 이름과 오류 설명이 들어있다.
    }
}

init();
```

 

---